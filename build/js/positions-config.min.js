/*! mercury - v0.1.0 - 2015-06-29
    Copyright 2015 Palantir */
(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;b=".positions-list",a="/careers/teams/",c={},$(window).load(function(){var a,b,e;e=POSITIONS.indices.office;for(b in e)a=e[b],c[r(b)]=b;return m(),$(".all-positions").on("show.bs.dropdown","#offices-dropdown",function(a){var b,c,d,e,f,g;return d=a.relatedTarget,g=$(d).width(),f=$(d).position(),b=$(this).children(".dropdown-menu").width(),e=f.left+g/2,c=e-b/2,$(this).children(".dropdown-menu").css({left:c})}),$(".all-positions").on("click",".office-picker a",function(a){var b;return a.preventDefault(),b="all-offices"===this.id?(window.location.hash="",p()):i($(this).data("office")),d(b),$("body").scrollTop($(".all-positions").offset().top-$(".navbar").innerHeight())}),window.onpopstate=function(){return q().then(function(){return h()})},h()}),h=function(){var a,b;return null!=window.location.hash&&"#"!==window.location.hash&&(b=window.location.hash.slice(1),null!=c[b]&&(a=c[b])),null==a?d(n()):null!=a?d(i(a)):void 0},i=function(a){var b;return window.location.hash="#"+r(a),b=$.when(q()).then(function(){var b,c,d,e,g,h,i,j,l;if(h=POSITIONS.indices.office[a],null==h)throw new Error("No office named '"+a+"'");for(c={},j=h.sort(),d=0,i=j.length;i>d;d++)g=j[d],e=k(g),b=e.team,null==c[b]&&(c[b]={department_title:b,positions:[]}),c[b].positions.push(f(e));return c=function(){var a,d,e,f;for(e=Object.keys(c).sort(),f=[],a=0,d=e.length;d>a;a++)b=e[a],f.push(c[b]);return f}(),l={positions_count:h.length,office_name:a,departments:c,offices:FULL_TEMPLATE_DATA.offices,continents:FULL_TEMPLATE_DATA.continents},window.FILTERED_OFFICE_DATA=l,l}),$.when(b).then(function(a){return null!=$(".positions-heading")&&o("positions_office_selector","positions-heading",a),o("department_listing","positions-list",a)})},m=function(){var b,c,d,e,f,h,i,j,k;return d=POSITIONS.indices.department,i=POSITIONS.indices.office,e=function(b){var c,d;return c=b.toLowerCase().trim(),d=new RegExp(/\s+/g),c=c.replace(d,"-"),""+a+c+"/"},k={total_positions_count:Object.keys(POSITIONS.jobs).length,office_count:function(){var a,b,c;b=0;for(a in i)c=i[a],b++;return b}(),departments:function(){var a,h,i,k;for(i=Object.keys(d).sort(),k=[],a=0,h=i.length;h>a;a++)c=i[a],f=d[c],j=g(f.sort()),k.push(b={department_title:c,department_link:e(c),positions:j});return k}(),offices:function(){var a;a=[];for(h in i)f=i[h],a.push(b={office_name:h,positions:f,positions_count:f.length});return a}(),continents:POSITIONS.indices.continent},this.FULL_TEMPLATE_DATA=k},n=function(){return o("positions_office_selector","positions-heading",FULL_TEMPLATE_DATA),o("department_listing","positions-list",FULL_TEMPLATE_DATA)},f=function(a){var b;return b={label:a.name,link_url:a.url,offices:a.offices}},e=function(a){var b;return b=k(a),f(b)},g=function(a){var b,c;return c=function(){var c,d,f;for(f=[],c=0,d=a.length;d>c;c++)b=a[c],f.push(e(b));return f}()},p=function(){return $.when(q()).then(function(){return o("positions_office_selector","positions-heading",FULL_TEMPLATE_DATA),o("department_listing","positions-list",FULL_TEMPLATE_DATA)})},o=function(a,b,c){var d;return d=new $.Deferred(function(d){var e,f,g;return g=JST[a](c),f=$("."+b),f.html(g),d.then("HTML properly injected"),e=function(){return d.resolve(g)},setTimeout(e,0)}),d.promise()},l=function(a){var b,c,d;d=POSITIONS.positions;for(b in d)if(c=d[b],c.label===a)return c;return null},j=function(a){var b;return b=POSITIONS.indices[a],null!=b?b:null},k=function(a){var b;return b=POSITIONS.jobs[a]},q=function(){var a;return a=$.Deferred(function(a){var c,d,e,f;return e=$(".positions-list"),d=e.parent(),e.remove(),c=$('<div class="positions-list"></div>'),d.append(c),f=function(){return a.resolve(d.children(b))},setTimeout(f,0)}),a.promise()},d=function(a){var c;return c=$(b),null==a&&(a=c.promise()),$.when(a).then(function(){var a;return a=$.Deferred(function(a){var b;return b=function(){return c.masonry({itemSelector:".jobs-block",isFitWidth:!1,isInitLayout:!1}),c.masonry("once","layoutComplete",function(){return a.resolve()}),c.masonry("layout")},setTimeout(b,0)}),a.promise()})},r=function(a){return null!=a?a.split(",")[0].toLowerCase().replace(" ",""):void 0}}).call(this);
//# sourceMappingURL=positions-config.min.js.map